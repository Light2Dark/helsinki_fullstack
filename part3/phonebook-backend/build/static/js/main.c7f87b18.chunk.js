(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{42:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var c=t(2),r=t(17),a=t.n(r),u=t(18),o=t(3),i=t(0),s=function(e){return Object(i.jsxs)(i.Fragment,{children:[e.name," ",e.number," ",Object(i.jsx)("button",{onClick:e.deleteNum,children:"delete"}),Object(i.jsx)("br",{})]})},l=function(e){return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(i.jsxs)("div",{children:["Name:",Object(i.jsx)("input",{required:!0,value:e.newName,onChange:e.handleNameChange})]}),Object(i.jsxs)("div",{children:["Number:",Object(i.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"Add"})})]})})},b=t(4),d=t.n(b),m="/api/persons",j={getAll:function(){return d.a.get(m).then((function(e){return e.data}))},create:function(e){return d.a.post(m,e).then((function(e){return e.data}))},deleteNum:function(e){var n=d.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}));return console.log(n),n},replace:function(e,n){return d.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))}},f=function(e){var n=e.message;return null===n?null:Object(i.jsx)("div",{className:"success",children:n})},h=function(e){var n=e.message;return null===n?null:Object(i.jsx)("div",{className:"error",children:n})};t(42);var O=function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),b=Object(o.a)(a,2),d=b[0],m=b[1],O=Object(c.useState)(""),v=Object(o.a)(O,2),p=v[0],x=v[1],g=Object(c.useState)(null),N=Object(o.a)(g,2),w=N[0],S=N[1],k=Object(c.useState)(null),y=Object(o.a)(k,2),C=y[0],A=y[1];return Object(c.useEffect)((function(){j.getAll().then((function(e){r(e.persons)}))}),[]),Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(f,{message:C}),Object(i.jsx)(h,{message:w}),Object(i.jsx)(l,{onSubmit:function(e){e.preventDefault();var n,c={name:d,number:p},a=Object(u.a)(t);try{var o=function(){var e=n.value;if(e.name===c.name)return window.confirm("".concat(e.name," is already added to phonebook, replace the old number with a new one?"))&&j.replace(e.id,c).then((function(e){r(t.map((function(n){return n.id!==e.id?n:e})))})).catch((function(n){A("Information of ".concat(e.name," has already been removed from the server")),setTimeout((function(){A(null)}),4e3),r(t.filter((function(n){return e.name!==n.name})))})),m(""),x(""),{v:void 0}};for(a.s();!(n=a.n()).done;){var i=o();if("object"===typeof i)return i.v}}catch(s){a.e(s)}finally{a.f()}j.create(c).then((function(e){return r(t.concat(e))})),x(""),m(""),S("Added ".concat(c.name)),setTimeout((function(){S(null)}),4e3)},persons:t,newName:d,handleNameChange:function(e){m(e.target.value)},newNumber:p,handleNumberChange:function(e){x(e.target.value)}}),Object(i.jsx)("h2",{children:"Numbers"}),t.map((function(e){return Object(i.jsx)(s,{name:e.name,number:e.number,deleteNum:function(){return n=e.id,c=e.name,void(window.confirm("Delete ".concat(c,"?"))&&j.deleteNum(n).then(r(t.filter((function(e){return e.id!==n})))).catch((function(e){alert("The number for ".concat(c," has ").concat(e))})));var n,c}},e.id)}))]})};a.a.render(Object(i.jsx)(O,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.c7f87b18.chunk.js.map